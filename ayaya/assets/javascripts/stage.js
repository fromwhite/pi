!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r=window.webpackJsonp;window.webpackJsonp=function(n,i,a){for(var u,c,s,l=0,f=[];l<n.length;l++)c=n[l],o[c]&&f.push(o[c][0]),o[c]=0;for(u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u]);for(r&&r(n,i,a);f.length;)f.shift()();if(a)for(l=0;l<a.length;l++)s=e(e.s=a[l]);return s};var n={},o={1:0};e.e=function(t){function r(){u.onerror=u.onload=null,clearTimeout(c);var e=o[t];0!==e&&(e&&e[1](new Error("Loading chunk "+t+" failed.")),o[t]=void 0)}var n=o[t];if(0===n)return new Promise(function(t){t()});if(n)return n[2];var i=new Promise(function(e,r){n=o[t]=[e,r]});n[2]=i;var a=document.getElementsByTagName("head")[0],u=document.createElement("script");u.type="text/javascript",u.charset="utf-8",u.async=!0,u.timeout=12e4,e.nc&&u.setAttribute("nonce",e.nc),u.src=e.p+"build/"+({0:"sprite"}[t]||t)+".js";var c=setTimeout(r,12e4);return u.onerror=u.onload=r,a.appendChild(u),i},e.m=t,e.c=n,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e.oe=function(t){throw console.error(t),t},e(e.s=10)}([function(t,e,r){"use strict";t.exports=r(4)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(7),c=r(8),s=function(t){return t&&t.__esModule?t:{default:t}}(c),l=function(t){function e(t){n(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(r.dpr=window.devicePixelRatio||1,r.container=t||null,r.gl=null,r.im=null,r.then=0,!r.container||"CANVAS"!==r.container.nodeName){var i=document.createElement("canvas");i.id="gl",i.oncontextmenu=function(){return!1},r.container||document.body.appendChild(i),r.container&&"CANVAS"!==r.container.nodeName&&r.container.appendChild(i),r.container=i}return r.init(),r}return i(e,t),a(e,[{key:"init",value:function(){this.on(function(t){return console.log("get published content: "+t)},"Event test"),this.on(function(t){return console.log("get content: "+t)},"sss"),this._width=this.container.parentNode.clientWidth,this._height=this.container.parentNode.clientHeight,this.width=this.dpr*this._width,this.height=this.dpr*this._height,this.container.style.width=this._width+"px",this.container.style.height=this._height+"px",this.container.width=~~this.width,this.container.height=~~this.height,this.im=(0,s.default)(this.container),this.gl=this.im.gl,this.initEvent()}},{key:"dp",value:function(t){return~~t*this.dpr}},{key:"initEvent",value:function(){var t=this;["mousedown","mouseup","mousemove","touchstart","touchend","touchmove","click"].forEach(function(e){t.container.addEventListener(e,function(r){var n=r.target.getBoundingClientRect(),o=n.left,i=n.top,a=void 0,u=void 0,c={originalEvent:r,type:e};if(r.changedTouches){var s=r.changedTouches[0],l=s.clientX,f=s.clientY;a=Math.round(l-o),u=Math.round(f-i)}else a=Math.round(r.clientX-o),u=Math.round(r.clientY-i);Object.assign(c,{originalX:a,originalY:u}),t.emit("native",e,c)},!0)})}},{key:"viewport",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gl;t.viewport(0,0,t.canvas.width,t.canvas.height)}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gl;t.clear(t.COLOR_BUFFER_BIT)}},{key:"update",value:function(){}},{key:"draw",value:function(){}},{key:"render",value:function(t){var e=this;console.log("render"),(0,u.raf)(function(){return e.loop()})}},{key:"loop",value:function(t){var e=this,r=.001*t;this.deltaTime=Math.min(.1,r-this.then),this.then=r,console.log("loop"),this.update(),this.draw(),(0,u.raf)(function(){return e.loop()})}}]),e}(u.Event),f={create:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return new(Function.prototype.bind.apply(l,[null].concat(e)))}};e.default=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={identity:[1,0,0,0,1,0,0,0,1],multiply:function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],u=t[5],c=t[6],s=t[7],l=t[8],f=e[0],h=e[1],d=e[2],v=e[3],p=e[4],y=e[5],g=e[6],m=e[7],w=e[8];e[0]=f*r+v*n+g*o,e[1]=h*r+p*n+m*o,e[2]=d*r+y*n+w*o,e[3]=f*i+v*a+g*u,e[4]=h*i+p*a+m*u,e[5]=d*i+y*a+w*u,e[6]=f*c+v*s+g*l,e[7]=h*c+p*s+m*l,e[8]=d*c+y*s+w*l},vec2_multiply:function(t,e){var r=[];return r[0]=e[0]*t[0]+e[3]*t[1]+e[6],r[1]=e[1]*t[0]+e[4]*t[1]+e[7],r},transpose:function(t){return[t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]]}},o={length:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},normalize:function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return 0===e?[0,0,0]:[t[0]/e,t[1]/e,t[2]/e]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},angle:function(t,e){return Math.acos((t[0]*e[0]+t[1]*e[1]+t[2]*e[2])/(Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])*Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])))},cross:function(t,e){return[t[1]*e[2]-e[1]*t[2],t[2]*e[0]-e[2]*t[0],t[0]*e[1]-e[0]*t[1]]},multiply:function(t,e){return[t[0]*e,t[1]*e,t[2]*e]},add:function(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]},subtract:function(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]},equal:function(t,e){return void 0===t&&void 0===e||void 0!==t&&void 0!==e&&(Math.abs(t[0]-e[0])<1e-7&&Math.abs(t[1]-e[1])<1e-7&&Math.abs(t[2]-e[2])<1e-7)}},i={multiply:function(t,e,r){r=r||new Float32Array(16);var n=e[0],o=e[1],i=e[2],a=e[3],u=e[4],c=e[5],s=e[6],l=e[7],f=e[8],h=e[9],d=e[10],v=e[11],p=e[12],y=e[13],g=e[14],m=e[15],w=t[0],x=t[1],b=t[2],_=t[3],A=t[4],E=t[5],R=t[6],T=t[7],F=t[8],M=t[9],k=t[10],L=t[11],P=t[12],S=t[13],O=t[14],j=t[15];return r[0]=n*w+o*A+i*F+a*P,r[1]=n*x+o*E+i*M+a*S,r[2]=n*b+o*R+i*k+a*O,r[3]=n*_+o*T+i*L+a*j,r[4]=u*w+c*A+s*F+l*P,r[5]=u*x+c*E+s*M+l*S,r[6]=u*b+c*R+s*k+l*O,r[7]=u*_+c*T+s*L+l*j,r[8]=f*w+h*A+d*F+v*P,r[9]=f*x+h*E+d*M+v*S,r[10]=f*b+h*R+d*k+v*O,r[11]=f*_+h*T+d*L+v*j,r[12]=p*w+y*A+g*F+m*P,r[13]=p*x+y*E+g*M+m*S,r[14]=p*b+y*R+g*k+m*O,r[15]=p*_+y*T+g*L+m*j,r},addVectors:function(t,e,r){return r=r||new Float32Array(3),r[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r},subtractVectors:function(t,e,r){return r=r||new Float32Array(3),r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r},normalize:function(t,e){e=e||new Float32Array(3);var r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return r>1e-5&&(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r),e},cross:function(t,e,r){return r=r||new Float32Array(3),r[0]=t[1]*e[2]-t[2]*e[1],r[1]=t[2]*e[0]-t[0]*e[2],r[2]=t[0]*e[1]-t[1]*e[0],r},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},distanceSq:function(t,e){var r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2];return r*r+n*n+o*o},distance:function(t,e){return Math.sqrt(distanceSq(t,e))},identity:function(t){return t=t||new Float32Array(16),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},transpose:function(t,e){return e=e||new Float32Array(16),e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15],e},lookAt:function(t,e,r,n){n=n||new Float32Array(16);var o=normalize(subtractVectors(t,e)),i=normalize(cross(r,o)),a=normalize(cross(o,i));return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=0,n[4]=a[0],n[5]=a[1],n[6]=a[2],n[7]=0,n[8]=o[0],n[9]=o[1],n[10]=o[2],n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n},perspective:function(t,e,r,n,o){o=o||new Float32Array(16);var i=Math.tan(.5*Math.PI-.5*t),a=1/(r-n);return o[0]=i/e,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(r+n)*a,o[11]=-1,o[12]=0,o[13]=0,o[14]=r*n*a*2,o[15]=0,o},orthographic:function(t,e,r,n,o,i,a){return a=a||new Float32Array(16),a[0]=2/(e-t),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(n-r),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2/(o-i),a[11]=0,a[12]=(t+e)/(t-e),a[13]=(r+n)/(r-n),a[14]=(o+i)/(o-i),a[15]=1,a},frustum:function(t,e,r,n,o,i){var a=e-t,u=n-r,c=i-o;return dst[0]=2*o/a,dst[1]=0,dst[2]=0,dst[3]=0,dst[4]=0,dst[5]=2*o/u,dst[6]=0,dst[7]=0,dst[8]=(t+e)/a,dst[9]=(n+r)/u,dst[10]=-(i+o)/c,dst[11]=-1,dst[12]=0,dst[13]=0,dst[14]=-2*o*i/c,dst[15]=0,dst},translation:function(t,e,r,n){return n=n||new Float32Array(16),n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=t,n[13]=e,n[14]=r,n[15]=1,n},translate:function(t,e,r,n,o){o=o||new Float32Array(16);var i=t[0],a=t[1],u=t[2],c=t[3],s=t[4],l=t[5],f=t[6],h=t[7],d=t[8],v=t[9],p=t[10],y=t[11],g=t[12],m=t[13],w=t[14],x=t[15];return t!==o&&(o[0]=i,o[1]=a,o[2]=u,o[3]=c,o[4]=s,o[5]=l,o[6]=f,o[7]=h,o[8]=d,o[9]=v,o[10]=p,o[11]=y),o[12]=i*e+s*r+d*n+g,o[13]=a*e+l*r+v*n+m,o[14]=u*e+f*r+p*n+w,o[15]=c*e+h*r+y*n+x,o},xRotation:function(t,e){e=e||new Float32Array(16);var r=Math.cos(t),n=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},xRotate:function(t,e,r){r=r||new Float32Array(16);var n=t[4],o=t[5],i=t[6],a=t[7],u=t[8],c=t[9],s=t[10],l=t[11],f=Math.cos(e),h=Math.sin(e);return r[4]=f*n+h*u,r[5]=f*o+h*c,r[6]=f*i+h*s,r[7]=f*a+h*l,r[8]=f*u-h*n,r[9]=f*c-h*o,r[10]=f*s-h*i,r[11]=f*l-h*a,t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},yRotation:function(t,e){e=e||new Float32Array(16);var r=Math.cos(t),n=Math.sin(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},yRotate:function(t,e,r){r=r||new Float32Array(16);var n=t[0],o=t[1],i=t[2],a=t[3],u=t[8],c=t[9],s=t[10],l=t[11],f=Math.cos(e),h=Math.sin(e);return r[0]=f*n-h*u,r[1]=f*o-h*c,r[2]=f*i-h*s,r[3]=f*a-h*l,r[8]=f*u+h*n,r[9]=f*c+h*o,r[10]=f*s+h*i,r[11]=f*l+h*a,t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},zRotation:function(t,e){e=e||new Float32Array(16);var r=Math.cos(t),n=Math.sin(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},zRotate:function(t,e,r){r=r||new Float32Array(16);var n=t[0],o=t[1],i=t[2],a=t[3],u=t[4],c=t[5],s=t[6],l=t[7],f=Math.cos(e),h=Math.sin(e);return r[0]=f*n+h*u,r[1]=f*o+h*c,r[2]=f*i+h*s,r[3]=f*a+h*l,r[4]=f*u-h*n,r[5]=f*c-h*o,r[6]=f*s-h*i,r[7]=f*l-h*a,t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},axisRotation:function(t,e,r){r=r||new Float32Array(16);var n=t[0],o=t[1],i=t[2],a=Math.sqrt(n*n+o*o+i*i);n/=a,o/=a,i/=a;var u=n*n,c=o*o,s=i*i,l=Math.cos(e),f=Math.sin(e),h=1-l;return r[0]=u+(1-u)*l,r[1]=n*o*h+i*f,r[2]=n*i*h-o*f,r[3]=0,r[4]=n*o*h-i*f,r[5]=c+(1-c)*l,r[6]=o*i*h+n*f,r[7]=0,r[8]=n*i*h+o*f,r[9]=o*i*h-n*f,r[10]=s+(1-s)*l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},axisRotate:function(t,e,r,n){n=n||new Float32Array(16);var o=e[0],i=e[1],a=e[2],u=Math.sqrt(o*o+i*i+a*a);o/=u,i/=u,a/=u;var c=o*o,s=i*i,l=a*a,f=Math.cos(r),h=Math.sin(r),d=1-f,v=c+(1-c)*f,p=o*i*d+a*h,y=o*a*d-i*h,g=o*i*d-a*h,m=s+(1-s)*f,w=i*a*d+o*h,x=o*a*d+i*h,b=i*a*d-o*h,_=l+(1-l)*f,A=t[0],E=t[1],R=t[2],T=t[3],F=t[4],M=t[5],k=t[6],L=t[7],P=t[8],S=t[9],O=t[10],j=t[11];return n[0]=v*A+p*F+y*P,n[1]=v*E+p*M+y*S,n[2]=v*R+p*k+y*O,n[3]=v*T+p*L+y*j,n[4]=g*A+m*F+w*P,n[5]=g*E+m*M+w*S,n[6]=g*R+m*k+w*O,n[7]=g*T+m*L+w*j,n[8]=x*A+b*F+_*P,n[9]=x*E+b*M+_*S,n[10]=x*R+b*k+_*O,n[11]=x*T+b*L+_*j,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},scaling:function(t,e,r,n){return n=n||new Float32Array(16),n[0]=t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=r,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},scale:function(t,e,r,n,o){return o=o||new Float32Array(16),o[0]=e*t[0],o[1]=e*t[1],o[2]=e*t[2],o[3]=e*t[3],o[4]=r*t[4],o[5]=r*t[5],o[6]=r*t[6],o[7]=r*t[7],o[8]=n*t[8],o[9]=n*t[9],o[10]=n*t[10],o[11]=n*t[11],t!==o&&(o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o},inverse:function(t,e){e=e||new Float32Array(16);var r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],u=t[5],c=t[6],s=t[7],l=t[8],f=t[9],h=t[10],d=t[11],v=t[12],p=t[13],y=t[14],g=t[15],m=h*g,w=y*d,x=c*g,b=y*s,_=c*d,A=h*s,E=o*g,R=y*i,T=o*d,F=h*i,M=o*s,k=c*i,L=l*p,P=v*f,S=a*p,O=v*u,j=a*f,C=l*u,B=r*p,N=v*n,U=r*f,D=l*n,I=r*u,G=a*n,q=m*u+b*f+_*p-(w*u+x*f+A*p),X=w*n+E*f+F*p-(m*n+R*f+T*p),V=x*n+R*u+M*p-(b*n+E*u+k*p),Y=A*n+T*u+k*f-(_*n+F*u+M*f),z=1/(r*q+a*X+l*V+v*Y);return e[0]=z*q,e[1]=z*X,e[2]=z*V,e[3]=z*Y,e[4]=z*(w*a+x*l+A*v-(m*a+b*l+_*v)),e[5]=z*(m*r+R*l+T*v-(w*r+E*l+F*v)),e[6]=z*(b*r+E*a+k*v-(x*r+R*a+M*v)),e[7]=z*(_*r+F*a+M*l-(A*r+T*a+k*l)),e[8]=z*(L*s+O*d+j*g-(P*s+S*d+C*g)),e[9]=z*(P*i+B*d+D*g-(L*i+N*d+U*g)),e[10]=z*(S*i+N*s+I*g-(O*i+B*s+G*g)),e[11]=z*(C*i+U*s+G*d-(j*i+D*s+I*d)),e[12]=z*(S*h+C*y+P*c-(j*y+L*c+O*h)),e[13]=z*(U*y+L*o+N*h-(B*h+D*y+P*o)),e[14]=z*(B*c+G*y+O*o-(I*y+S*o+N*c)),e[15]=z*(I*h+j*o+D*c-(U*c+G*h+C*o)),e},transformVector:function(t,e,r){r=r||new Float32Array(4);for(var n=0;n<4;++n){r[n]=0;for(var o=0;o<4;++o)r[n]+=e[o]*t[4*o+n]}return r},transformPoint:function(t,e,r){r=r||new Float32Array(3);var n=e[0],o=e[1],i=e[2],a=n*t[3]+o*t[7]+i*t[11]+t[15];return r[0]=(n*t[0]+o*t[4]+i*t[8]+t[12])/a,r[1]=(n*t[1]+o*t[5]+i*t[9]+t[13])/a,r[2]=(n*t[2]+o*t[6]+i*t[10]+t[14])/a,r},transformDirection:function(t,e,r){r=r||new Float32Array(3);var n=e[0],o=e[1],i=e[2];return r[0]=n*t[0]+o*t[4]+i*t[8],r[1]=n*t[1]+o*t[5]+i*t[9],r[2]=n*t[2]+o*t[6]+i*t[10],r},transformNormal:function(t,e,r){r=r||new Float32Array(3);var n=inverse(t),o=e[0],i=e[1],a=e[2];return r[0]=o*n[0]+i*n[1]+a*n[2],r[1]=o*n[4]+i*n[5]+a*n[6],r[2]=o*n[8]+i*n[9]+a*n[10],r},copy:function(t,e){return e=e||new Float32Array(16),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}};e.mat3=n,e.vec3=o,e.m4=i},,function(t,e,r){"use strict";var n=function(){return this}()||Function("return this")(),o=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,i=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r(5),o)n.regeneratorRuntime=i;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},function(t,e,r){"use strict";(function(t){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(r){function n(t,e,r,n){var o=e&&e.prototype instanceof i?e:i,a=Object.create(o.prototype),u=new v(n||[]);return a._invoke=l(t,r,u),a}function o(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function i(){}function a(){}function u(){}function c(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function s(t){function r(n,i,a,u){var c=o(t[n],t,i);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"===(void 0===l?"undefined":e(l))&&w.call(l,"__await")?Promise.resolve(l.__await).then(function(t){r("next",t,a,u)},function(t){r("throw",t,a,u)}):Promise.resolve(l).then(function(t){s.value=t,a(s)},u)}u(c.arg)}function n(t,e){function n(){return new Promise(function(n,o){r(t,e,n,o)})}return i=i?i.then(n,n):n()}var i;this._invoke=n}function l(t,e,r){var n=T;return function(i,a){if(n===M)throw new Error("Generator is already running");if(n===k){if("throw"===i)throw a;return y()}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=f(u,r);if(c){if(c===L)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===T)throw n=k,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=M;var s=o(t,e,r);if("normal"===s.type){if(n=r.done?k:F,s.arg===L)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=k,r.method="throw",r.arg=s.arg)}}}function f(t,e){var r=t.iterator[e.method];if(r===g){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=g,f(t,e),"throw"===e.method))return L;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return L}var n=o(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,L;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=g),e.delegate=null,L):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,L)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function v(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function p(t){if(t){var e=t[b];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(w.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=g,e.done=!0,e};return n.next=n}}return{next:y}}function y(){return{value:g,done:!0}}var g,m=Object.prototype,w=m.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},b=x.iterator||"@@iterator",_=x.asyncIterator||"@@asyncIterator",A=x.toStringTag||"@@toStringTag",E="object"===e(t),R=r.regeneratorRuntime;if(R)return void(E&&(t.exports=R));R=r.regeneratorRuntime=E?t.exports:{},R.wrap=n;var T="suspendedStart",F="suspendedYield",M="executing",k="completed",L={},P={};P[b]=function(){return this};var S=Object.getPrototypeOf,O=S&&S(S(p([])));O&&O!==m&&w.call(O,b)&&(P=O);var j=u.prototype=i.prototype=Object.create(P);a.prototype=j.constructor=u,u.constructor=a,u[A]=a.displayName="GeneratorFunction",R.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},R.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,A in t||(t[A]="GeneratorFunction")),t.prototype=Object.create(j),t},R.awrap=function(t){return{__await:t}},c(s.prototype),s.prototype[_]=function(){return this},R.AsyncIterator=s,R.async=function(t,e,r,o){var i=new s(n(t,e,r,o));return R.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},c(j),j[A]="Generator",j[b]=function(){return this},j.toString=function(){return"[object Generator]"},R.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},R.values=p,v.prototype={constructor:v,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&w.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,n){return i.type="throw",i.arg=t,r.next=e,n&&(r.method="next",r.arg=g),!!n}if(this.done)throw t;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=w.call(o,"catchLoc"),u=w.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&w.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,L):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),L},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),d(r),L}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;d(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:p(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=g),L}}}(function(){return this}()||Function("return this")())}).call(e,r(6)(t))},function(t,e,r){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},a=function(t,e){!function r(){t.length>0&&t.shift().apply(e||{},[r].concat(Array.prototype.slice.call(arguments,0)))}()},u=function(){function t(){n(this,t),this.subscribers=new Map([[]])}return o(t,[{key:"on",value:function(t,e){var r=this.subscribers;if(!r.get(t))return r.set(t,[e]);r.set(t,r.get(t).push(e))}},{key:"emit",value:function(t,e){var r=this.subscribers.get(t);if(r){var n=!0,o=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){a.value.apply(this,[].slice.call(arguments,1))}}catch(t){o=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}}}}]),t}();e.queue=a,e.Event=u,e.raf=i},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){function n(o,i){try{var a=e[o](i),u=a.value}catch(t){return void r(t)}if(!a.done)return Promise.resolve(u).then(function(t){n("next",t)},function(t){n("throw",t)});t(u)}return n("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=r(0),u=n(a),c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(9),l=n(s),f=r(2),h=function(){function t(e){i(this,t),this.canvas=e,this.gl=void 0,this.transform=new l.default,this._resources=new Map,this.init()}return c(t,[{key:"init",value:function(){this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl");var t=this.gl;if(!t)throw new Error("connot get gl context!");var e=this.createProgram(t);this.positionLocation=t.getAttribLocation(e,"a_position"),this.texcoordLocation=t.getAttribLocation(e,"a_texcoord"),this.matrixLocation=t.getUniformLocation(e,"u_matrix"),this.textureMatrixLocation=t.getUniformLocation(e,"u_textureMatrix");var r=(t.getUniformLocation(e,"u_texture"),t.createBuffer());t.bindBuffer(t.ARRAY_BUFFER,r),this.positionBuffer=r;var n=[0,0,0,1,1,0,1,0,0,1,1,1];t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW);var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),this.texcoordBuffer=o;var i=[0,0,0,1,1,0,1,0,0,1,1,1];t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW)}},{key:"getFragmentShaderSource",value:function(){return"precision mediump float;\n        \n        varying vec2 v_texcoord;\n        \n        uniform sampler2D u_texture;\n        \n        void main() {\n           gl_FragColor = texture2D(u_texture, v_texcoord);\n        }"}},{key:"getVertexShaderSource",value:function(){return"attribute vec4 a_position;\n        attribute vec2 a_texcoord;\n        \n        uniform mat4 u_matrix;\n        uniform mat4 u_textureMatrix;\n        \n        varying vec2 v_texcoord;\n        \n        void main() {\n           gl_Position = u_matrix * a_position;\n           v_texcoord = (u_textureMatrix * vec4(a_texcoord, 0, 1)).xy;\n        }"}},{key:"getFragmentShader",value:function(t){return this.getShader(t,t.FRAGMENT_SHADER,this.getFragmentShaderSource())}},{key:"getVertexShader",value:function(t){return this.getShader(t,t.VERTEX_SHADER,this.getVertexShaderSource())}},{key:"getShader",value:function(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)}},{key:"createProgram",value:function(t){var e=this.getFragmentShader(t),r=this.getVertexShader(t),n=t.createProgram();return t.attachShader(n,r),t.attachShader(n,e),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||console.log("Could not initialise shaders:"+t.getProgramInfoLog(n)),t.useProgram(n),n}},{key:"loadTexture",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;if("string"!=typeof t)throw new Error("loadTexture faild");var n=this._resources,o=t;if(!n.has(o))return new Promise(function(i,a){var u=e.gl,c=u.createTexture();u.bindTexture(u.TEXTURE_2D,c),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,1,1,0,u.RGBA,u.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR);var s={width:1,height:1,texture:c},l=setTimeout(function(){a(new Error("loadTexture timeout"))},r),f=new Image;f.addEventListener("load",function(){s.width=f.width,s.height=f.height,u.bindTexture(u.TEXTURE_2D,s.texture),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,f),i(s),n.set(o,s),clearTimeout(l)}),f.src=t})}},{key:"loadTex",value:function(){function t(t){return e.apply(this,arguments)}var e=o(u.default.mark(function t(e){var r,n,o;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=4;break}return t.next=3,this.loadTexture(e);case 3:return t.abrupt("return",t.sent);case 4:if(!Array.isArray(e)){t.next=22;break}r=[],n=0;case 7:if(!(n<e.length)){t.next=21;break}if("string"!=typeof(o=e[n])){t.next=17;break}return t.t0=r,t.next=13,this.loadTexture(o);case 13:t.t1=t.sent,t.t0.push.call(t.t0,t.t1),t.next=18;break;case 17:throw new Error("loadTexs faild in progress:"+n);case 18:n++,t.next=7;break;case 21:return t.abrupt("return",r);case 22:case"end":return t.stop()}},t,this)}));return t}()},{key:"drawImage",value:function(t,e,r,n,o,i,a,u,c,s,l,h){var d=this.gl;void 0===u&&(u=n,n=0),void 0===c&&(c=o,o=0),void 0===i&&(i=e),void 0===a&&(a=r),void 0===s&&(s=i,i=e),void 0===l&&(l=a,a=r),void 0===h&&(h=0),d.bindTexture(d.TEXTURE_2D,t),d.bindBuffer(d.ARRAY_BUFFER,this.positionBuffer),d.enableVertexAttribArray(this.positionLocation),d.vertexAttribPointer(this.positionLocation,2,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,this.texcoordBuffer),d.enableVertexAttribArray(this.texcoordLocation),d.vertexAttribPointer(this.texcoordLocation,2,d.FLOAT,!1,0,0);var v=f.m4.orthographic(0,d.canvas.width,d.canvas.height,0,-1,1);v=f.m4.translate(v,u,c,0),v=f.m4.scale(v,s,l,1),d.uniformMatrix4fv(this.matrixLocation,!1,v);var p=f.m4.scaling(1/e,1/r,1);p=f.m4.translate(p,.5*e,.5*r,0),p=f.m4.zRotate(p,h),p=f.m4.translate(p,-.5*e,-.5*r,0),p=f.m4.translate(p,n,o,0),p=f.m4.scale(p,i,a,1),d.uniformMatrix4fv(this.textureMatrixLocation,!1,p),d.uniform1i(this.textureLocation,0),d.drawArrays(d.TRIANGLES,0,6)}}]),t}(),d=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return new(Function.prototype.bind.apply(h,[null].concat(e)))};e.default=d},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(2),a=function(){function t(){n(this,t),this.stack=[],this.restore()}return o(t,[{key:"restore",value:function(){this.stack.pop(),this.stack.length<1&&(this.stack[0]=i.m4.identity())}},{key:"save",value:function(){this.stack.push(this.getCurrentMatrix())}},{key:"getCurrentMatrix",value:function(){return this.stack[this.stack.length-1].slice()}},{key:"setCurrentMatrix",value:function(){return this.stack[this.stack.length-1]=m}},{key:"translate",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.getCurrentMatrix();this.setCurrentMatrix(i.m4.translate(n,t,e,r))}},{key:"rotateZ",value:function(t){var e=this.getCurrentMatrix();this.setCurrentMatrix(i.m4.zRotate(e,t))}},{key:"scale",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.getCurrentMatrix();this.setCurrentMatrix(i.m4.scale(n,t,e,r))}}]),t}();e.default=a},function(t,e,r){t.exports=r(1)}]);